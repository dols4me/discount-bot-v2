# –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—á–µ—Ç–∞ Stock/Quantity —Ç–æ–≤–∞—Ä–æ–≤

## üìä –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è stock

### 1. –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
Stock –±–µ—Ä–µ—Ç—Å—è –∏–∑ API –ú–æ–π–°–∫–ª–∞–¥ `/report/stock/bystore`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞/–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö stock
```json
{
  "meta": {
    "href": "https://api.moysklad.ru/api/remap/1.2/entity/variant/5e37fde4-7d98-11f0-0a80-0f06003af77f"
  },
  "stockByStore": [
    {
      "name": "–¢–æ–ª—å—è—Ç—Ç–∏",
      "stock": 2.0
    },
    {
      "name": "–¢—É–ª–∞", 
      "stock": 0.0
    }
  ]
}
```

### 3. –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤ –∫–æ–¥–µ

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è –æ—Å—Ç–∞—Ç–∫–æ–≤
```python
# –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ ID
stock_dict = {}
for stock_item in stock_data:
    meta_href = stock_item.get('meta', {}).get('href', '')
    if meta_href:
        item_id = meta_href.split('/')[-1].split('?')[0]
        
        # –°—á–∏—Ç–∞–µ–º –æ–±—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ –≤—Å–µ–º —Å–∫–ª–∞–¥–∞–º
        total_stock = 0
        for store_stock in stock_item.get('stockByStore', []):
            total_stock += store_stock.get('stock', 0)
        
        stock_dict[item_id] = total_stock
```

#### –®–∞–≥ 2: –†–∞—Å—á–µ—Ç stock –¥–ª—è —Ç–æ–≤–∞—Ä–∞
```python
total_stock = 0
for variant in variants:
    variant_id = variant.get('id')
    variant_stock = stock_dict.get(variant_id, 0)
    total_stock += variant_stock
```

### 4. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞

#### –ü—Ä–∏–º–µ—Ä 1: –†–µ–º–µ–Ω—å (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- **–í–∞—Ä–∏–∞–Ω—Ç 1**: –†–µ–º–µ–Ω—å (Brown) - Stock: 0
- **–í–∞—Ä–∏–∞–Ω—Ç 2**: –†–µ–º–µ–Ω—å (Black) - Stock: 3  
- **–í–∞—Ä–∏–∞–Ω—Ç 3**: –†–µ–º–µ–Ω—å (White) - Stock: 0
- **–ò—Ç–æ–≥–æ stock —Ç–æ–≤–∞—Ä–∞**: 0 + 3 + 0 = **3**

#### –ü—Ä–∏–º–µ—Ä 2: –ë—Ä—é–∫–∏ ITCL (4 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- **–í–∞—Ä–∏–∞–Ω—Ç 1**: –ë—Ä—é–∫–∏ ITCL (Burgundy, 42) - Stock: 0
- **–í–∞—Ä–∏–∞–Ω—Ç 2**: –ë—Ä—é–∫–∏ ITCL (Burgundy, 44) - Stock: 0
- **–í–∞—Ä–∏–∞–Ω—Ç 3**: –ë—Ä—é–∫–∏ ITCL (Burgundy, 46) - Stock: 1
- **–í–∞—Ä–∏–∞–Ω—Ç 4**: –ë—Ä—é–∫–∏ ITCL (Burgundy, 48) - Stock: 0
- **–ò—Ç–æ–≥–æ stock —Ç–æ–≤–∞—Ä–∞**: 0 + 0 + 1 + 0 = **1**

#### –ü—Ä–∏–º–µ—Ä 3: –ñ–∞–∫–µ—Ç Denim (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- **–í–∞—Ä–∏–∞–Ω—Ç 1**: –ñ–∞–∫–µ—Ç Denim (42) - Stock: 0
- **–í–∞—Ä–∏–∞–Ω—Ç 2**: –ñ–∞–∫–µ—Ç Denim (44) - Stock: 1
- **–í–∞—Ä–∏–∞–Ω—Ç 3**: –ñ–∞–∫–µ—Ç Denim (46) - Stock: -2
- **–ò—Ç–æ–≥–æ stock —Ç–æ–≤–∞—Ä–∞**: 0 + 1 + (-2) = **-1**

### 5. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –û–±—ã—á–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ
- –ü—Ä–∏–º–µ—Ä: 1, 2, 3, 10, 100

#### ‚ö†Ô∏è –ù—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è  
- –¢–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ
- –ü—Ä–∏–º–µ—Ä: 0

#### ‚ùå –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –¢–æ–≤–∞—Ä—ã —Å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–ª–∏ –ø–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ü–µ–π
- –ü—Ä–∏–º–µ—Ä: -1, -2, -5

### 6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–º —Ç–æ–≤–∞—Ä–∞–º

| –¢–æ–≤–∞—Ä | Stock | –í–∞—Ä–∏–∞–Ω—Ç—ã | –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è |
|-------|-------|----------|-------------|
| –î–∂–∏–Ω—Å—ã Mom Fit grey | 1 | 1 | 36: 1 |
| –†–µ–º–µ–Ω—å | 3 | 3 | Brown: 0, Black: 3, White: 0 |
| –î–∂–µ–º–ø–µ—Ä V –∏–∑ –≤–∏—Å–∫–æ–∑—ã | 4 | 2 | one size Grey: 2, one size Bordo: 2 |
| –ë–ª—É–∑–∫–∞ –∏–∑ —à–µ–ª–∫–∞ ITCL | 0 | 2 | 1: 0, 2: 0 |
| –ñ–∞–∫–µ—Ç ITCL | 0 | 2 | Burgundy 44: 0, Burgundy 46: 0 |
| –ë—Ä—é–∫–∏ ITCL | 1 | 4 | 42: 0, 44: 0, 46: 1, 48: 0 |
| –Æ–±–∫–∞ –∂–µ–Ω—Å–∫–∞—è | 0 | 1 | 42: 0 |
| –ñ–∞–∫–µ—Ç Denim | -1 | 3 | 42: 0, 44: 1, 46: -2 |
| –ü–æ–ª–æ | 1 | 2 | Black os: 0, Blue os: 1 |
| –ë—Ä—é–∫–∏ –∂–µ–Ω—Å–∫–∏–µ | 3 | 3 | 42: 1, 44: 1, 46: 1 |

### 7. –í—ã–≤–æ–¥—ã

1. **Stock —Ç–æ–≤–∞—Ä–∞ = —Å—É–º–º–∞ stock –≤—Å–µ—Ö –µ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π**
2. **Stock –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ = —Å—É–º–º–∞ stock –ø–æ –≤—Å–µ–º —Å–∫–ª–∞–¥–∞–º**
3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** (—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. **–ù—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –æ–∑–Ω–∞—á–∞—é—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ
5. **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** - –æ–±—ã—á–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏

### 8. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Å–∫–ª–∞–¥—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ Stock —Ç–æ–≤–∞—Ä–∞ —Ä–∞–≤–µ–Ω —Å—É–º–º–µ stock –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
